System.register("chunks:///_virtual/DecorCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){var t,n,o,i,r,a,s,d,c,l,h,m,u,p,g,C,I,v,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,d=e.ScrollView,c=e.find,l=e.Vec3,h=e.Sprite,m=e.Color,u=e.UITransform,p=e.UIOpacity,g=e.v3,C=e.tween,I=e.Component},function(e){v=e.GameManager,f=e.NameSound}],execute:function(){var _,T,b,w,y,H,B,M,D,F,x,P,W,S,N,U,E,k,L,z,O;r._RF.push({},"5ca540BOJ5AFoL+y5Ejnv8H","DecorCtrl",void 0);var A=a.ccclass,R=a.property;e("DecorCtrl",(_=A("DecorCtrl"),T=R(s),b=R(s),w=R(s),y=R(s),H=R(s),B=R(s),M=R(s),D=R(d),F=R(s),_((W=t((P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"containChoooseCard",W,i(t)),o(t,"containBowTie",S,i(t)),o(t,"containItem",N,i(t)),o(t,"nodeCard",U,i(t)),o(t,"nodeBowTie",E,i(t)),o(t,"nodeItemMove",k,i(t)),o(t,"nodeImgCam",L,i(t)),o(t,"nodeScroll",z,i(t)),o(t,"nodeIconHand",O,i(t)),t._canMoveItem=!1,t._countItem=0,t._gameMgr=void 0,t._itemDecor=null,t._basePos=void 0,t._nodeItemHint=void 0,t._tweenNodeIconHand=null,t._tween=void 0,t}n(t,e);var r=t.prototype;return r.start=function(){this._gameMgr=c("Canvas").getComponent(v),this.node.on(s.EventType.TOUCH_START,this.onTouchStart.bind(this)),this.node.on(s.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),this.node.on(s.EventType.TOUCH_CANCEL,this.onTouchCancel.bind(this)),this.nodeIconHand.active=!1,this.setupNodeCard(),this.setupNodeBowTie(),this.setupItemDecorClicked()},r.onTouchStart=function(e){this._itemDecor=null;var t=this.checkItemDecor(e.getUILocation());t&&(this._basePos=new l(e.getUILocation().x,e.getUILocation().y),this._itemDecor=t)},r.setupNodeCard=function(){for(var e=0;e<this.containChoooseCard.children.length;e++){var t=this.containChoooseCard.children[e].getChildByName("bubble");t&&t.on(s.EventType.TOUCH_START,this.onItemCardClicked.bind(this))}},r.onItemCardClicked=function(e){var t=e.currentTarget;this.nodeCard.getComponent(h).spriteFrame=t.getComponent(h).spriteFrame,this._gameMgr.runSound(f.Click);for(var n=0;n<this.containChoooseCard.children.length;n++){var o=this.containChoooseCard.children[n].getChildByName("bubble");t.parent.name==o.parent.name?o.parent.getComponent(h).color=(new m).fromHEX("#a5b181"):o.parent.getComponent(h).color=(new m).fromHEX("#ffffff")}},r.setupNodeBowTie=function(){for(var e=0;e<this.containBowTie.children.length;e++){var t=this.containBowTie.children[e].getChildByName("bubble");t&&t.on(s.EventType.TOUCH_START,this.onItemBowTieClicked.bind(this))}},r.onItemBowTieClicked=function(e){this._gameMgr.runSound(f.Click);var t=e.currentTarget;this.nodeBowTie.getComponent(h).spriteFrame=t.getComponent(h).spriteFrame;for(var n=0;n<this.containBowTie.children.length;n++){var o=this.containBowTie.children[n].getChildByName("bubble");t.parent.name==o.parent.name?o.parent.getComponent(h).color=(new m).fromHEX("#a5b181"):o.parent.getComponent(h).color=(new m).fromHEX("#ffffff")}},r.setupItemDecorClicked=function(){for(var e=0;e<this.containItem.children.length;e++){var t=this.containItem.children[e].getChildByName("icon");t.on(s.EventType.TOUCH_START,this.onTouchStartItem.bind(this)),t.on(s.EventType.TOUCH_END,this.onTouchCancelItemDecor.bind(this))}},r.onTouchStartItem=function(e){this._gameMgr.runSound(f.Click),this.nodeItemMove.getComponent(h).spriteFrame=e.currentTarget.getComponent(h).spriteFrame,this.nodeScroll.enabled=!1,this.nodeItemMove.setWorldPosition(new l(e.getUILocation().x,e.getUILocation().y)),this.showHint()},r.onTouchCancelItemDecor=function(e){console.log("onTouchCancel"),this.hideHint(),this.nodeItemMove.getComponent(h).spriteFrame=null},r.onTouchMove=function(e){if(this._canMoveItem){console.log("touch move"),this._canMoveItem=!1;var t=e.getUILocation();if(this.nodeItemMove.setWorldPosition(new l(t.x,t.y)),this._itemDecor){var n=this._itemDecor.getComponent(u).getBoundingBoxToWorld(),o=this.nodeCard.getComponent(u).getBoundingBoxToWorld();n.intersects(o)?this._itemDecor.setWorldPosition(new l(e.getUILocation().x,e.getUILocation().y)):(this._itemDecor.setWorldPosition(this._basePos),this._itemDecor=null)}}},r.onTouchCancel=function(e){if(this.hideHint(),this.nodeScroll.enabled=!0,null!=this.nodeItemMove.getComponent(h).spriteFrame){var t=this.nodeCard.getComponent(u).getBoundingBoxToWorld(),n=this.nodeItemMove.getComponent(u).getBoundingBoxToWorld();if(!t.intersects(n))return void(this.nodeItemMove.getComponent(h).spriteFrame=null);var o=new s;o.addComponent(h).spriteFrame=this.nodeItemMove.getComponent(h).spriteFrame,o.parent=this.nodeCard,o.scale=new l(.7,.7),o.setWorldPosition(this.nodeItemMove.getWorldPosition());for(var i=0;i<this.containItem.children.length;i++){var r=this.containItem.children[i].getChildByName("icon");o.getComponent(h).spriteFrame.name==r.getComponent(h).spriteFrame.name&&(r.parent.getComponent(h).color=(new m).fromHEX("#a5b181"))}this._countItem++,this._countItem>=5?this.nodeImgCam.active=!0:this.nodeImgCam.active=!1;var a=[2,3,4];this._gameMgr.runSound(a[Math.floor(Math.random()*a.length)])}if(this.nodeItemMove.getComponent(h).spriteFrame=null,this._itemDecor){var d=this.nodeCard.getComponent(u).getBoundingBoxToWorld(),c=this._itemDecor.getComponent(u).getBoundingBoxToWorld();d.intersects(c)?this._itemDecor.setWorldPosition(new l(e.getUILocation().x,e.getUILocation().y)):this._itemDecor.setWorldPosition(this._basePos)}},r.checkItemDecor=function(e){for(var t=0;t<this.nodeCard.children.length;t++)if(this.nodeCard.children[t]&&this.nodeCard.children[t].getComponent(h).spriteFrame){var n=this.nodeCard.children[t].getComponent(u).getBoundingBoxToWorld();if(this.checkPosInBoundingBox(e,n))return this.nodeCard.children[t]}return null},r.checkPosInBoundingBox=function(e,t){return e.x>=t.xMin&&e.x<=t.xMax&&e.y>=t.yMin&&e.y<=t.yMax},r.showHint=function(){null==this._nodeItemHint&&(this._nodeItemHint=new s,this._nodeItemHint.setParent(this.node),this._nodeItemHint.addComponent(h).spriteFrame=this.nodeItemMove.getComponent(h).spriteFrame,this._nodeItemHint.addComponent(p).opacity=150,this._nodeItemHint.scale=g(.7,.7)),this._nodeItemHint.setSiblingIndex(999);var e=this.containItem.getComponent(u).getBoundingBoxToWorld(),t=Math.random()*e.width-e.width/2,n=Math.random()*e.height-e.height/2,o=new l(t+this.nodeCard.getWorldPosition().x,n+this.nodeCard.getWorldPosition().y,0);this._nodeItemHint.setWorldPosition(o),this._nodeItemHint.getComponent(h).spriteFrame=this.nodeItemMove.getComponent(h).spriteFrame,this._nodeItemHint.getComponent(p).opacity=150,this._tween=C(this._nodeItemHint.getComponent(p)).repeatForever(C(this._nodeItemHint.getComponent(p)).to(.5,{opacity:{value:150,easing:"circIn"}}).to(.5,{opacity:{value:0,easing:"circIn"}})).start(),this.showTweenMoveNodeHand()},r.showTweenMoveNodeHand=function(){var e=this,t=this._nodeItemHint.getWorldPosition().clone(),n=this.nodeItemMove.getWorldPosition().clone(),o=t.subtract(n);this.nodeIconHand.active=!0,this._tweenNodeIconHand=C(this.nodeIconHand).repeatForever(C(this.nodeIconHand).call((function(){e.nodeIconHand.setWorldPosition(n)})).delay(.3).by(1,{position:{value:o,easing:"backIn"}}).delay(.4)).start()},r.hideHint=function(){this.nodeIconHand.active=!1,null!=this._tween&&this._tween.stop(),null!=this._tweenNodeIconHand&&this._tweenNodeIconHand.stop(),null!=this._nodeItemHint&&(this._nodeItemHint.getComponent(h).spriteFrame=null)},r.update=function(e){this._canMoveItem=!0},t}(I)).prototype,"containChoooseCard",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(P.prototype,"containBowTie",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(P.prototype,"containItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(P.prototype,"nodeCard",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(P.prototype,"nodeBowTie",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(P.prototype,"nodeItemMove",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(P.prototype,"nodeImgCam",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(P.prototype,"nodeScroll",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(P.prototype,"nodeIconHand",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=P))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,r,i,a,l,c,d,u,s,h,p,C,m,g,f,b,S,v,y,w;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Node,c=e.AudioClip,d=e.Camera,u=e.tween,s=e.Vec3,h=e.UIOpacity,p=e.Button,C=e.find,m=e.RenderTexture,g=e.view,f=e.SpriteFrame,b=e.UITransform,S=e.Sprite,v=e.director,y=e.AudioSource,w=e.Component}],execute:function(){var D,z,B,G,E,I,N,O,A,F,T,_,L,R,k,x,M,U,H,P,V,j,K,W,X,$,q,J,Q,Y,Z,ee,ne,te,oe,re,ie,ae,le;i._RF.push({},"5e7b1S2ozpOlblLeLrnL7Uv","GameManager",void 0);var ce=a.ccclass,de=a.property,ue=(e("GameManager",(D=ce("GameManager"),z=de(l),B=de(l),G=de(l),E=de(l),I=de(l),N=de(l),O=de(l),A=de(l),F=de(l),T=de(l),_=de(l),L=de(l),R=de(l),k=de(l),x=de(l),M=de(l),U=de(c),H=de(d),D((j=n((V=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,o(n,"nodeChooseCard",j,r(n)),o(n,"nodeDecorCard1",K,r(n)),o(n,"nodeDecorCard2",W,r(n)),o(n,"nodeDecorCard3",X,r(n)),o(n,"nodeFinalDecor",$,r(n)),o(n,"nodeScreenShot",q,r(n)),o(n,"picture",J,r(n)),o(n,"targetSprite",Q,r(n)),o(n,"nodeBack",Y,r(n)),o(n,"flash",Z,r(n)),o(n,"nodeEndGame",ee,r(n)),o(n,"nodeImgCam",ne,r(n)),o(n,"nodeBgEndGame",te,r(n)),o(n,"nodeRootUIEndGame",oe,r(n)),o(n,"listStar",re,r(n)),o(n,"nodeContainSound",ie,r(n)),o(n,"listSound",ae,r(n)),o(n,"cam",le,r(n)),n._cardChoosen=1,n._countStar=3,n}t(n,e);var i=n.prototype;return i.start=function(){this.nodeEndGame.active=!1,this.nodeChooseCard.active=!0,this.nodeDecorCard1.active=!1,this.nodeDecorCard2.active=!1,this.nodeDecorCard3.active=!1,this.nodeScreenShot.active=!1,this.runSound(ue.ChooseCard),this.runAnimCard(),console.log("[INFO]: Progress: 1")},i.runAnimCard=function(){for(var e=0;e<3;e++)switch(e){case 0:case 1:case 2:this.anim3(this.nodeChooseCard.children[0].children[e])}},i.anim1=function(e){u(e).repeatForever(u(e).to(.75,{scale:new s(.81,.81,.81)}).to(.75,{scale:new s(.9,.9,.9)}).delay(.2)).start()},i.anim2=function(e){var n=e.getComponent(h);n||(n=e.addComponent(h)),u(n).repeatForever(u(n).to(.75,{opacity:180}).to(.75,{opacity:255}).delay(.2)).start()},i.anim3=function(e){e.angle=-15,u(e).repeatForever(u(e).to(.75,{angle:5}).to(.75,{angle:-5}).delay(.2)).start()},i.chooseDecor=function(e,n){this.nodeChooseCard.active=!1,this._cardChoosen=n,1==n?this.nodeDecorCard1.active=!0:2==n?this.nodeDecorCard2.active=!0:3==n&&(this.nodeDecorCard3.active=!0),this.runSound(ue.ChooseDecor)},i.btnShot=function(){this.nodeScreenShot.active=!0,1==this._cardChoosen?this.nodeDecorCard1.getChildByName("nodeDecorCard").parent=this.nodeFinalDecor:2==this._cardChoosen?this.nodeDecorCard2.getChildByName("nodeDecorCard").parent=this.nodeFinalDecor:3==this._cardChoosen&&(this.nodeDecorCard3.getChildByName("nodeDecorCard").parent=this.nodeFinalDecor),this.nodeDecorCard1.active=!1,this.nodeDecorCard2.active=!1,this.nodeDecorCard3.active=!1,this.nodeImgCam.active=!0,this.nodeImgCam.getComponent(p).interactable=!1,this.btnShotImage(),C("Canvas/nodeBgm").active=!1},i.btnShotImage=function(){var e=this;this.flash.active=!0,this.scheduleOnce((function(){e.flash.active=!1,e.nodeBack.active=!1;var n=new m;n.reset(g.getVisibleSize()),e.cam.targetTexture=n;var t=new f;t.texture=n,e.targetSprite.getComponent(b).contentSize=g.getVisibleSize(),e.targetSprite.getComponent(S).spriteFrame=t,e.targetSprite.scale=new s(1,1,0),console.log("[ACTION]: SCREENSHOT"),e.scheduleOnce((function(){e.cam.targetTexture=null}),0),e.scheduleOnce((function(){e.picture.active=!0}),0),e.scheduleOnce(e.onGameEnd.bind(e),3),e.scheduleOnce((function(){e.targetSprite.scale=new s(.8,.8),e.nodeBack.active=!0}),1)}),.05)},i.onGameEnd=function(){var e=this;C("Canvas/nodeBgm").active=!0,this.nodeEndGame.active=!0,this.nodeBgEndGame.scale=new s(0,0,0),u(this.nodeBgEndGame).to(.5,{scale:new s(1,1,1)}).call((function(){})).start(),u(this.nodeRootUIEndGame).to(1,{scale:new s(1,1,1)}).call((function(){for(var n=function(n){var t=e.listStar[n].children[0];u(t).delay(.9*n).call((function(){e.runSound(ue.Star)})).to(.5,{scale:new s(1,1,1)}).to(.2,{scale:new s(1.1,1.1,1.1)}).to(.2,{scale:new s(1,1,1)}).call((function(){2==n&&e.logResult(3)})).start()},t=0;t<e._countStar;t++)n(t)})).start()},i.playAgain=function(){v.loadScene("main")},i.runSound=function(e){if(0!=e){var n=this.nodeContainSound.getChildByName("$"+e);n&&n.destroy(),1==e&&this.nodeContainSound.getChildByName("0")&&this.nodeContainSound.getChildByName("0").destroy(),(n=new l).name=e+"",n.parent=this.nodeContainSound,n.addComponent(y),n.getComponent(y).clip=this.listSound[e],n.getComponent(y).play()}},i.btnNextLog=function(){console.log("[ACTION]: NEXTGAME")},i.btnListGameLog=function(){console.log("[ACTION]: SHOWLISTGAME")},i.logResult=function(e){void 0===e&&(e=0),console.log("[RESULT]: 0 - "+e)},i.btnBack=function(){console.log("[ACTION]: BACK")},n}(w)).prototype,"nodeChooseCard",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=n(V.prototype,"nodeDecorCard1",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=n(V.prototype,"nodeDecorCard2",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=n(V.prototype,"nodeDecorCard3",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=n(V.prototype,"nodeFinalDecor",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=n(V.prototype,"nodeScreenShot",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=n(V.prototype,"picture",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(V.prototype,"targetSprite",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(V.prototype,"nodeBack",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(V.prototype,"flash",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=n(V.prototype,"nodeEndGame",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(V.prototype,"nodeImgCam",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=n(V.prototype,"nodeBgEndGame",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=n(V.prototype,"nodeRootUIEndGame",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=n(V.prototype,"listStar",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=n(V.prototype,"nodeContainSound",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=n(V.prototype,"listSound",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),le=n(V.prototype,"cam",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=V))||P)),e("NameSound",function(e){return e[e.ChooseCard=0]="ChooseCard",e[e.ChooseDecor=1]="ChooseDecor",e[e.Beautifull=2]="Beautifull",e[e.Great=3]="Great",e[e.Excellent=4]="Excellent",e[e.Star=5]="Star",e[e.Click=6]="Click",e}({})));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./DecorCtrl.ts","./GameManager.ts","./ScaleCtrl.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ScaleCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,l,o,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,l=e.screen,o=e.Vec3,s=e.view,c=e.Component}],execute:function(){var r;i._RF.push({},"ec95c0UPBJLf50GRulLsQJF","ScaleCtrl",void 0);var a=n.ccclass;n.property,e("ScaleCtrl",a("ScaleCtrl")(r=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).globalScale=1,t}t(i,e);var n=i.prototype;return n.start=function(){this.handleMultiRes(),l.on("window-resize",this.onWindowResize.bind(this)),this.onWindowResize()},n.onWindowResize=function(){this.handleMultiRes(),this.node.scale=new o(this.globalScale,this.globalScale,1)},n.handleMultiRes=function(){var e=l.windowSize,t=s.getDesignResolutionSize(),i=e.width/e.height,n=t.width/t.height;i>n&&(this.globalScale=n/i)},i}(c))||r);i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});